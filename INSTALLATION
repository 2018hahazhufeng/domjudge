System parts:

- database system: a machine with a MySQL database server
  - needed DJ code: none
  - state stored: the database itself, otherwise nothing at all
  - relevant configuration settings: db passwords
  - directories with dynamic stuff needed: none
- Jury system: main coordination system
  - needed DJ code: www dir, submit daemon, ...
  - state stored: nothing. Only spooling: temporarily web-submitted files
    until picked up by submit daemon
  - directories with dynamic stuff needed:
    - websubmit incoming dir
    - trusted submit incoming dir
  - relevant configuration settings: (nearly) all

  - needed DJ code: judging, ...?
  - state stored: judging data (testinputs, testoutputs, timings)
  - directories with dynamic stuff needed:
    - tempdir for submissions
    - tempdir for chroot trees
    - logdir
  - relevant configuration settings: databaseconnectivity, 'restrictions
    during testing' section
- Team tools:
  - submit client; configuratie: alleen submit host

Noten:
- Jurysysteem is niet verder uitgesplitst www vs submit, omdat je websumit
  eigenlijk altijd wil toestaan, en je van de www server dan files naar de
  submit dir wilt doen -- dus dat op een andere machine doen is zeer onhandig. 

Instatie procedure:
- Makefile moet 3 main targets ondersteunen:
  - {make,install}_db
  - {make,install}_jury
  - {make,install}_judgehost
  - {make,install}_submitclient

Een make all / install all heeft geen zin, omdat je iig nooit alle VIER de
dingen op dezelfde host wilt

Layout voorstel:
/ [bijv (default?) /srv/domjudge]

/jury/ [alleen op 'jury' systeem; owned by gewone user]
/jury/htpasswd_for_jury_members [self-evident]
/jury/incoming/web [dj:www-data, u=rwx,g=wx,o=]
/jury/incoming/trusted [dj:dj, u=rwx,go=]
/jury/submissions [dj:dj, u=rwx,go=] ('log' van alle submissies die in DB staan)
/jury/config.php (autogenerated)
/jury/www (gekopieerd uit source tarball)
/jury/bin (static_scoreboard.php, runssh_*, submitdeamons)
/jury/judgedata [optioneel -- zodat judgehosts dit hiervandaan kunnen kopieren]

(jury is self-contained nu!)

/judgehost [alleen op 'judgehost' systeem; owned by gewone user]
/judgehost/judgedata [dj:dj u=rwx,go=] (erg private!)
/judgehost/submissions (of 'spool'?) [tempdir om submissies naar toe te downloaden]
/judgehost/chroots
/judgehost/masterchroot [met java stuff, of 'javachroot' als dit alleen bij java gebruikt gaat worden?]
/judgehost/log
/judgehost/bin [gekopierd uit system/judge, beep uit system/bin]
/judgehost/config.{php,sh}

(judgehost is nu ook self-contained)


- Bugs/reminders:
  - make etc moet nooit bij default (bijv. ongeconfigureerd) in $HOME gaan
    kutten, NOOIT.
  - submit client een optie --dump-config die laat zien hoe 'ie geconfigd is?
